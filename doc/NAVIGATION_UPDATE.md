# 导航栏更新说明

## 更新内容

将侧边导航栏的第二个导航项从"发现"改为"发布"，作为发表帖子的页面。

## 具体改动

### 1. 新增发布页面
- **文件**: `src/views/CreatePostPage.vue`
- **功能**: 完整的帖子发布功能
  - 标题输入（最多100字符）
  - 封面图片上传（支持本地上传和URL链接）
  - 内容编辑（最多5000字符）
  - 标签管理（最多5个标签）
  - 草稿保存功能
  - 发布功能

### 2. 路由更新
- **文件**: `src/router/index.js`
- **改动**: 
  - 移除 `/discover` 路由
  - 新增 `/create` 路由，指向 `CreatePostPage` 组件
  - 需要登录认证才能访问

### 3. 导航栏更新
- **文件**: `src/App.vue`
- **改动**:
  - 侧边导航栏第二项从"发现"改为"发布"
  - 图标从 `fa-compass` 改为 `fa-pen-to-square`
  - 路径从 `/discover` 改为 `/create`
  - 头部创建按钮现在会跳转到发布页面（仅登录用户可见）

### 4. API 服务更新
- **文件**: `src/services/api.js`
- **改动**: 新增 `createBlog(blogData)` 方法用于创建帖子

### 5. 文件清理
- **删除**: `src/views/Discover.vue`（不再使用）

## 功能特性

### 发布页面功能
1. **表单验证**: 标题和内容为必填项
2. **字符限制**: 标题100字符，内容5000字符
3. **图片上传**: 支持本地文件上传（最大5MB）和URL链接
4. **标签系统**: 支持添加最多5个标签，用空格或回车分隔
5. **草稿保存**: 自动保存到localStorage，页面刷新后可恢复
6. **响应式设计**: 适配移动端和桌面端

### 用户体验
1. **实时字符计数**: 显示当前输入字符数和限制
2. **图片预览**: 上传后可预览封面图片
3. **标签管理**: 可视化标签添加和删除
4. **加载状态**: 发布时显示加载状态
5. **错误处理**: 友好的错误提示信息

## 技术实现

### 状态管理
- 使用 Vue 3 Composition API
- 集成 Pinia 用户状态管理
- 表单数据响应式管理

### 文件上传
- 支持本地文件读取转换为 base64
- 文件大小限制和格式验证
- 图片预览功能

### API 集成
- 使用统一的 axios 配置
- 自动处理认证和错误
- 支持请求拦截和响应处理

## 使用方法

1. **访问发布页面**: 
   - 点击侧边导航栏的"发布"按钮
   - 或点击头部的创建按钮（笔图标）
   - 直接访问 `/create` 路径

2. **发布帖子**:
   - 填写标题（必填）
   - 上传封面图片（可选）
   - 编写内容（必填）
   - 添加标签（可选）
   - 点击"发布"按钮

3. **保存草稿**:
   - 点击"保存草稿"按钮
   - 草稿会自动保存到浏览器本地存储
   - 下次访问页面时会自动恢复

## 注意事项

1. **权限要求**: 只有登录用户才能访问发布页面
2. **数据验证**: 前端和后端都需要进行数据验证
3. **文件大小**: 图片上传限制为5MB
4. **浏览器兼容**: 使用了现代浏览器API，建议使用最新版本浏览器

## 后续优化建议

1. **富文本编辑器**: 考虑集成富文本编辑器提升内容编辑体验
2. **图片压缩**: 添加客户端图片压缩功能
3. **自动保存**: 实现定时自动保存草稿
4. **预览功能**: 添加发布前预览功能
5. **分类管理**: 添加帖子分类功能 